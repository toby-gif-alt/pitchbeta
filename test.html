<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>ðŸŽµ Absolute Pitch Trainer - Test</title>
<style>
  :root { --bg:#0f172a; --card:#1e293b; --muted:#334155; --good:#16a34a; --bad:#dc2626; --text:#e5e7eb; --accent:#fbbf24; --neutral:#94a3b8; --muted2:#2a3a54; }
  *{box-sizing:border-box}
  body{font-family:sans-serif;background:var(--bg);color:var(--text);margin:0;padding:20px}
  .card{max-width:1060px;margin:auto;background:var(--card);border-radius:20px;padding:20px;box-shadow:0 10px 30px rgba(0,0,0,.15)}
  h1,h2,h3{margin:0 0 8px}
  button{margin:6px;padding:10px 16px;border-radius:12px;border:none;cursor:pointer;font-size:14px;background:var(--muted);color:var(--text)}
  input{padding:10px 12px;border-radius:12px;border:1px solid var(--muted);background:var(--card);color:var(--text)}
  .screen{display:none}
</style>
</head>
<body>
  <!-- Start -->
  <div class="card screen" id="startScreen">
    <h1>Welcome!</h1>
    <p>Enter your name to begin:</p>
    <input id="userNameInput" placeholder="Your name" />
    <button id="startBtn">Start â–¶</button>
  </div>

  <!-- Menu -->
  <div class="card screen" id="menuScreen">
    <h1 id="greeting">Absolute Pitch Trainer</h1>
    <button id="menuStart">â–¶ Start Training</button>
  </div>

<script>
// Basic state management
let state;
try {
  state = JSON.parse(localStorage.getItem('apTrainer')||'null') || { userName: null };
} catch(e) {
  state = { userName: null };
}

function save() {
  try {
    localStorage.setItem('apTrainer', JSON.stringify(state));
  } catch(e) {}
}

function showScreen(id) {
  document.querySelectorAll('.screen').forEach(el => el.style.display='none');
  const el = document.getElementById(id);
  if (el) el.style.display='block';
}

// Initialize on load
window.addEventListener('load', () => {
  console.log('Initializing...');
  
  // Wire up start button
  const startBtn = document.getElementById('startBtn');
  if (startBtn) {
    startBtn.onclick = () => {
      const nameInput = document.getElementById('userNameInput');
      const name = (nameInput?.value || '').trim() || 'Player';
      state.userName = name;
      save();
      const greeting = document.getElementById('greeting');
      if (greeting) greeting.textContent = `Hello ${state.userName}!`;
      showScreen('menuScreen');
    };
  }
  
  // Show appropriate screen
  if (!state.userName) {
    showScreen('startScreen');
    console.log('Showing start screen');
  } else {
    const greeting = document.getElementById('greeting');
    if (greeting) greeting.textContent = `Hello ${state.userName}!`;
    showScreen('menuScreen');
    console.log('Showing menu screen');
  }
});
</script>
</body>
</html>